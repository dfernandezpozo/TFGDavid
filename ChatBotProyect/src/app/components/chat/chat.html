<div class="chatbot-wrapper">

  <!-- Container del chat -->
  <div class="chat-container">
    
    <!-- Header del chat -->
    <div class="chat-header">
      <div class="avatar">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="12" cy="12" r="3" fill="#00f5ff" opacity="0.9"/>
          <circle cx="12" cy="12" r="6" stroke="#00f5ff" stroke-width="0.8" stroke-dasharray="2 1" opacity="0.4"/>
        </svg>
      </div>
      <div class="header-info">
        <h2>AXON<em>AI</em></h2>
        <p><span class="status-dot"></span>Sistema Activo</p>
      </div>
    </div>

    <!-- Área de mensajes -->
    <div class="messages-area" #messagesContainer>
      <div 
        *ngFor="let message of messages" 
        class="message"
        [ngClass]="message.sender">
        
        <div class="message-avatar">
          <ng-container *ngIf="message.sender === 'bot'">
            <svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="10" cy="10" r="3" fill="#00f5ff"/>
              <circle cx="10" cy="10" r="5" stroke="#00f5ff" stroke-width="0.6" stroke-dasharray="2 1" opacity="0.5"/>
            </svg>
          </ng-container>
          <ng-container *ngIf="message.sender === 'user'">
            <svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="10" cy="10" r="3" fill="#bf5fff"/>
              <circle cx="10" cy="10" r="5" stroke="#bf5fff" stroke-width="0.6" stroke-dasharray="2 1" opacity="0.5"/>
            </svg>
          </ng-container>
        </div>
        
        <div class="message-wrapper">
          <div class="message-content">
            {{ message.text }}
          </div>
          <div class="message-time">
            {{ formatTime(message.timestamp) }}
          </div>
        </div>
      </div>

      <!-- Indicador de escritura -->
      <div *ngIf="isTyping" class="message bot">
        <div class="message-avatar">
          <svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="10" cy="10" r="3" fill="#00f5ff"/>
          </svg>
        </div>
        <div class="message-wrapper">
          <div class="message-content typing-indicator">
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Área de input -->
    <div class="input-area">
      <div class="input-wrapper">
        <input 
          type="text" 
          class="chat-input" 
          placeholder="Escribe tu consulta empresarial..."
          [(ngModel)]="userInput"
          (keypress)="onKeyPress($event)"
          [disabled]="isTyping"
        >
        <button 
          class="send-button" 
          (click)="sendMessage()"
          [disabled]="!userInput.trim() || isTyping">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
            <path d="M22 2L11 13M22 2L15 22l-4-9-9-4 20-7z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
    </div>

  </div>
</div>